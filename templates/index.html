<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë”í•˜ëŠ” êµíšŒ - ê¸°ë…êµ í•œêµ­ì¹¨ë¡€íšŒ</title>
    <link rel="stylesheet" href="/static/css/style.css?v=3">
    <script type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=04a9be7cc4a029e900041f8a88463d27&autoload=false&libraries=services"></script>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="container">
                <div class="logo">
                    <ul class="nav-menu">
                        <li><a href="#home" class="active">í™ˆ</a></li>
                        <li class="nav-item dropdown">
                            <a href="/about" class="dropbtn">êµíšŒì†Œê°œ</a>
                            <ul class="dropdown-menu">
                                <li><a href="/direction">ëª©íšŒë°©í–¥</a></li>
                                <li><a href="/about">ë¹„ì „</a></li>
                                <li><a href="#schedule-news">ì˜ˆë°°ì‹œê°„ ì•ˆë‚´</a></li>
                                <li><a href="#contact">ì°¾ì•„ì˜¤ì‹œëŠ” ê¸¸</a></li>
                                <li><a href="/people">ì„¬ê¸°ëŠ” ë¶„ë“¤</a></li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a href="#videos" class="dropbtn">ì˜ìƒ</a>
                            <ul class="dropdown-menu">
                                <li><a href="#videos" onclick="switchTab('vision')">êµíšŒ ë¹„ì „</a></li>
                                <li><a href="#videos" onclick="switchTab('sermons')">ìµœê·¼ì„¤êµ</a></li>
                                <li><a href="#videos" onclick="switchTab('shorts')">ìˆì¸ </a></li>
                                <li><a href="#videos" onclick="switchTab('qty')">ì˜¤ëŠ˜ì˜ QT</a></li>
                            </ul>
                        </li>
                        <li><a href="#schedule-news">ì˜ˆë°°ì•ˆë‚´</a></li>
                        <li><a href="#schedule-news">êµíšŒì†Œì‹</a></li>
                        <li><a href="#contact">ì°¾ì•„ì˜¤ì‹œëŠ” ê¸¸</a></li>
                        {% if user %}
                        {% if user.role == 'admin' %}
                        <li><a href="/admin" class="admin-link">ê´€ë¦¬ì</a></li>
                        {% endif %}
                        <li><a href="/logout">ë¡œê·¸ì•„ì›ƒ</a></li>
                        {% else %}
                        <li><a href="/login" class="login-link">ë¡œê·¸ì¸</a></li>
                        {% endif %}
                    </ul>
                </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <h2 class="hero-title">í•˜ë‚˜ë‹˜ ë‚˜ë¼ì™€ ì˜ë¥¼ êµ¬í•˜ëŠ” êµíšŒ</h2>
            <p class="hero-subtitle">ë”í•˜ëŠ” êµíšŒì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤</p>
            <p class="hero-info">ê¸°ë…êµ í•œêµ­ì¹¨ë¡€íšŒ Â· êµíšŒ ëŒ€í‘œ ê¹€í•œê¸° ëª©ì‚¬</p>
            <div class="hero-buttons">
                <a href="#schedule-news" class="btn btn-primary">ì˜ˆë°° ì•ˆë‚´</a>
                <a href="/about" class="btn btn-secondary">êµíšŒ ì†Œê°œ</a>
            </div>
        </div>
    </section>

    <!-- Welcome Section -->
    <section class="welcome">
        <div class="container">
            <div class="section-header">
                <h2>í™˜ì˜í•©ë‹ˆë‹¤</h2>
                <div class="divider"></div>
            </div>
            <p class="welcome-text">
                {{ church_intro }}
            </p>
            <div class="church-info-banner">
                <div class="info-item">
                    <strong>ì†Œì†:</strong> ê¸°ë…êµ í•œêµ­ì¹¨ë¡€íšŒ
                </div>
                <div class="info-item">
                    <strong>êµíšŒëŒ€í‘œ:</strong> ê¹€í•œê¸° ëª©ì‚¬
                </div>
                <div class="info-item">
                    <strong>ìœ„ì¹˜:</strong> ëŒ€ì „ì‹œ ìœ ì„±êµ¬ í•™í•˜ë™
                </div>
            </div>
        </div>
    </section>

    <!-- Unified Videos Section -->
    <section id="videos" class="video-section">
        <div class="container">
            <div class="video-tabs">
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="switchVideoTab('vision')">êµíšŒ ë¹„ì „</button>
                    <button class="tab-btn" onclick="switchVideoTab('sermons')">ìµœê·¼ì„¤êµ</button>
                    <button class="tab-btn" onclick="switchVideoTab('shorts')">ìˆì¸ </button>
                    <button class="tab-btn" onclick="switchVideoTab('qty')">ì˜¤ëŠ˜ì˜ QT</button>
                </div>

                <!-- Vision Tab Content -->
                <div id="tab-vision" class="tab-content active">
                    <div class="carousel-container">
                        <button class="carousel-nav prev" aria-label="ì´ì „ì˜ìƒ"
                            onclick="scrollCarousel(this, -1)">â®</button>
                        <div class="video-grid carousel-track">
                            {% for vision in visions %}
                            <div class="card sermon-card {% if vision.youtube_id %}clickable-card{% endif %}" {% if
                                vision.youtube_id %}onclick="openVideoModal('{{ vision.youtube_id }}')"
                                style="cursor: pointer;" {% endif %}>
                                {% if vision.youtube_id %}
                                <div class="video-thumbnail">
                                    <img src="{{ vision.thumbnail }}" alt="{{ vision.title }}"
                                        onerror="this.src='https://img.youtube.com/vi/{{ vision.youtube_id }}/hqdefault.jpg'">
                                    <div class="play-button">â–¶</div>
                                </div>
                                {% endif %}
                                <div class="card-header">
                                    <h3>{{ vision.title }}</h3>
                                </div>
                                <div class="card-body">
                                    <p class="meta">
                                        <span class="date">ğŸ“… {{ vision.date }}</span>
                                    </p>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        <button class="carousel-nav next" aria-label="ë‹¤ìŒì˜ìƒ" onclick="scrollCarousel(this, 1)">â¯</button>
                    </div>
                </div>

                <!-- Sermons Tab Content -->
                <div id="tab-sermons" class="tab-content">
                    <div class="carousel-container">
                        <button class="carousel-nav prev" aria-label="ì´ì „ì˜ìƒ"
                            onclick="scrollCarousel(this, -1)">â®</button>
                        <div class="video-grid carousel-track">
                            {% for sermon in sermons %}
                            <div class="card sermon-card {% if sermon.youtube_id %}clickable-card{% endif %}" {% if
                                sermon.youtube_id %}onclick="openVideoModal('{{ sermon.youtube_id }}')"
                                style="cursor: pointer;" {% endif %}>
                                {% if sermon.youtube_id %}
                                <div class="video-thumbnail">
                                    <img src="{{ sermon.thumbnail }}" alt="{{ sermon.title }}"
                                        onerror="this.src='https://img.youtube.com/vi/{{ sermon.youtube_id }}/hqdefault.jpg'">
                                    <div class="play-button">â–¶</div>
                                </div>
                                {% endif %}
                                <div class="card-header">
                                    <h3>{{ sermon.title }}</h3>
                                </div>
                                <div class="card-body">
                                    <p class="meta">
                                        <span class="pastor">ğŸ‘¤ {{ sermon.pastor }}</span>
                                        <span class="date">ğŸ“… {{ sermon.date }}</span>
                                    </p>
                                    <p class="description">{{ sermon.description }}</p>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        <button class="carousel-nav next" aria-label="ë‹¤ìŒì˜ìƒ" onclick="scrollCarousel(this, 1)">â¯</button>
                    </div>
                </div>

                <!-- Shorts Tab Content -->
                <div id="tab-shorts" class="tab-content">
                    <div class="carousel-container shorts-container">
                        <button class="carousel-nav prev" aria-label="ì´ì „ì˜ìƒ"
                            onclick="scrollCarousel(this, -1)">â®</button>
                        <div class="video-grid carousel-track shorts-track">
                            {% for short in shorts %}
                            <div class="shorts-card" onclick="openVideoModal('{{ short.youtube_id }}', true)"
                                style="cursor: pointer;">
                                {% if short.youtube_id %}
                                <div class="shorts-thumbnail">
                                    <img src="{{ short.thumbnail }}" alt="{{ short.title }}"
                                        onerror="this.src='https://img.youtube.com/vi/{{ short.youtube_id }}/hqdefault.jpg'">
                                    <div class="shorts-play-button">â–¶</div>
                                    <div class="shorts-badge">Shorts</div>
                                </div>
                                {% endif %}
                                <div class="shorts-title">
                                    <h4>{{ short.title }}</h4>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        <button class="carousel-nav next" aria-label="ë‹¤ìŒì˜ìƒ" onclick="scrollCarousel(this, 1)">â¯</button>
                    </div>
                </div>

                <!-- QT Tab Content -->
                <div id="tab-qty" class="tab-content">
                    <div class="carousel-container shorts-container">
                        <button class="carousel-nav prev" aria-label="ì´ì „ì˜ìƒ"
                            onclick="scrollCarousel(this, -1)">â®</button>
                        <div class="video-grid carousel-track shorts-track">
                            {% for qty in qtys %}
                            <div class="shorts-card qty-card" onclick="openVideoModal('{{ qty.youtube_id }}')"
                                style="cursor: pointer;">
                                {% if qty.youtube_id %}
                                <div class="shorts-thumbnail">
                                    <img src="{{ qty.thumbnail }}" alt="{{ qty.title }}"
                                        onerror="this.src='https://img.youtube.com/vi/{{ qty.youtube_id }}/hqdefault.jpg'">
                                    <div class="shorts-play-button">â–¶</div>
                                    <div class="shorts-badge qty-badge">QT</div>
                                </div>
                                {% endif %}
                                <div class="shorts-title">
                                    <h4>{{ qty.title }}</h4>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        <button class="carousel-nav next" aria-label="ë‹¤ìŒì˜ìƒ" onclick="scrollCarousel(this, 1)">â¯</button>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Worship Schedule and News Section -->
    <section id="schedule-news" class="schedule-news-section">
        <div class="container">
            <div class="schedule-news-grid">
                <!-- Left: Consolidated Worship Schedule -->
                <div class="schedule-column">
                    <div class="section-header">
                        <h2>ì˜ˆë°° ì‹œê°„ ì•ˆë‚´</h2>
                        <div class="divider"></div>
                    </div>
                    <div class="consolidated-schedule">
                        <div class="schedule-list">
                            <div class="schedule-row">
                                <span class="schedule-name">ì£¼ì¼ ì˜ˆë°°</span>
                                <span class="schedule-time">ì¼ìš”ì¼ ì˜¤ì „ 10:40</span>
                            </div>
                            <div class="schedule-row">
                                <span class="schedule-name">ì£¼ì¼ ì„±ê²½ê³µë¶€ ë° ëª©ì¥ ëª¨ì„</span>
                                <span class="schedule-time">ì¼ìš”ì¼ ì˜¤í›„ 1:00</span>
                            </div>
                            <div class="schedule-row">
                                <span class="schedule-name">ìˆ˜ìš” ì˜ˆë°°</span>
                                <span class="schedule-time">ìˆ˜ìš”ì¼ ì˜¤í›„ 7:30 (Zoom)</span>
                            </div>
                            <div class="schedule-row">
                                <span class="schedule-name">ê¸ˆìš” ê¸°ë„íšŒ</span>
                                <span class="schedule-time">ê¸ˆìš”ì¼ ì˜¤í›„ 7:30</span>
                            </div>
                            <div class="schedule-row">
                                <span class="schedule-name">ì•„ì¹¨ ì˜ˆë°°</span>
                                <span class="schedule-time">ì˜¤ì „ 7:00 (Zoom)</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right: Church News -->
                <div class="news-column">
                    <div class="section-header">
                        <h2>êµíšŒì†Œì‹</h2>
                        <div class="divider"></div>
                    </div>
                    <div class="news-board">
                        <div class="news-container">
                            <!-- Header -->
                            <div class="news-header">
                                <div class="news-cell news-num">ë²ˆí˜¸</div>
                                <div class="news-cell news-subject">ì œëª©</div>
                                <div class="news-cell news-date">ì‘ì„±ì¼</div>
                                <div class="news-cell news-views">ì¡°íšŒ</div>
                            </div>
                            <!-- Body -->
                            <div class="news-body">
                                {% for news in news_list %}
                                <div class="news-item" onclick="window.location='/news/{{ news.id }}'"
                                    style="cursor: pointer;">
                                    <div class="news-cell news-num">{{ news.id }}</div>
                                    <div class="news-cell news-subject">{{ news.title }}</div>
                                    <div class="news-cell news-date">{{ news.date }}</div>
                                    <div class="news-cell news-views">{{ news.views }}</div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact">
        <div class="container">
            <div class="section-header">
                <h2>ì°¾ì•„ì˜¤ì‹œëŠ” ê¸¸</h2>
                <div class="divider"></div>
            </div>

            <!-- Location Map -->
            <div class="map-section">
                <div class="map-container">
                    <div id="kakaoMap" style="width:100%;height:420px;border-radius:12px;overflow:hidden;"></div>
                </div>
                <div class="map-buttons">
                    <a href="https://map.naver.com/p/search/ëŒ€ì „ì‹œ%20ìœ ì„±êµ¬%20í•™í•˜ë™%20755-6" target="_blank"
                        class="btn btn-naver">
                        ë„¤ì´ë²„ ì§€ë„ë¡œ ê¸¸ì°¾ê¸°
                    </a>
                    <a href="https://map.kakao.com/link/search/ëŒ€ì „ì‹œ%20ìœ ì„±êµ¬%20í•™í•˜ë™%20755-6" target="_blank"
                        class="btn btn-kakao">
                        ì¹´ì¹´ì˜¤ë§µìœ¼ë¡œ ê¸¸ì°¾ê¸°
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>ë”í•˜ëŠ” êµíšŒ</h4>
                    <p>ê¸°ë…êµ í•œêµ­ì¹¨ë¡€íšŒ</p>
                    <p>êµíšŒ ëŒ€í‘œ: ê¹€í•œê¸° ëª©ì‚¬</p>
                </div>
                <div class="footer-section">
                    <h4>ì£¼ì†Œ</h4>
                    <p>ëŒ€ì „ì‹œ ìœ ì„±êµ¬ í•™í•˜ë™ 755-6 1ì¸µ</p>
                    <p>Tel: 042-XXX-XXXX</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 ë”í•˜ëŠ” êµíšŒ. All rights reserved.</p>
                <p>í•˜ë‚˜ë‹˜ì˜ ì‚¬ë‘ê³¼ ì€í˜œê°€ í•¨ê»˜ í•˜ì‹œê¸°ë¥¼ ê¸°ë„í•©ë‹ˆë‹¤.</p>
            </div>
        </div>
    </footer>

    <!-- YouTube Video Modal -->
    <div id="videoModal" class="video-modal" onclick="closeVideoModal(event)">
        <div class="video-modal-content" id="videoModalContent">
            <span class="video-modal-close" onclick="closeVideoModal(event)">&times;</span>
            <div class="video-container" id="videoContainer">
                <iframe id="videoIframe" src="" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <script src="/static/js/script.js?v=2"></script>
    <script>
        // ì¹´ì¹´ì˜¤ ì§€ë„ ì´ˆê¸°í™”
        try {
            if (typeof kakao !== 'undefined' && kakao.maps) {
                kakao.maps.load(function () {
                    var container = document.getElementById('kakaoMap');
                    if (!container) return;
                    var options = {
                        center: new kakao.maps.LatLng(36.3204, 127.3397),
                        level: 4
                    };
                    var map = new kakao.maps.Map(container, options);

                    // ì£¼ì†Œë¡œ ì¢Œí‘œ ê²€ìƒ‰
                    var geocoder = new kakao.maps.services.Geocoder();
                    geocoder.addressSearch('ëŒ€ì „ ìœ ì„±êµ¬ í•™í•˜ë™ 755-6', function (result, status) {
                        if (status === kakao.maps.services.Status.OK) {
                            var coords = new kakao.maps.LatLng(result[0].y, result[0].x);
                            var marker = new kakao.maps.Marker({ map: map, position: coords });
                            var infowindow = new kakao.maps.InfoWindow({
                                content: '<div style="padding:8px 12px;font-size:13px;font-weight:600;color:#1a3a5c;white-space:nowrap;">ğŸ“ ë”í•˜ëŠ” êµíšŒ<br><span style="font-weight:400;font-size:12px;color:#666;">ëŒ€ì „ì‹œ ìœ ì„±êµ¬ í•™í•˜ë™ 755-6 1ì¸µ</span></div>'
                            });
                            infowindow.open(map, marker);
                            map.setCenter(coords);
                        } else {
                            var fallback = new kakao.maps.LatLng(36.3620, 127.3560);
                            var marker = new kakao.maps.Marker({ map: map, position: fallback });
                            var infowindow = new kakao.maps.InfoWindow({
                                content: '<div style="padding:8px 12px;font-size:13px;font-weight:600;color:#1a3a5c;">ğŸ“ ë”í•˜ëŠ” êµíšŒ<br><span style="font-weight:400;font-size:12px;color:#666;">ëŒ€ì „ì‹œ ìœ ì„±êµ¬ í•™í•˜ë™ 755-6 1ì¸µ</span></div>'
                            });
                            infowindow.open(map, marker);
                            map.setCenter(fallback);
                        }
                    });
                });
            } else {
                console.warn('ì¹´ì¹´ì˜¤ ì§€ë„ SDK ë¡œë“œ ì‹¤íŒ¨ - ì‚¬ì´íŠ¸ ë„ë©”ì¸ ë“±ë¡ì„ í™•ì¸í•˜ì„¸ìš”.');
            }
        } catch (e) {
            console.warn('ì¹´ì¹´ì˜¤ ì§€ë„ ì´ˆê¸°í™” ì˜¤ë¥˜:', e);
        }
    </script>
</body>

</html>