<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì í˜ì´ì§€ - ë”í•˜ëŠ” êµíšŒ</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/admin.css">
</head>
<body>
    <div class="admin-wrapper">
        <!-- Admin Header -->
        <header class="admin-header">
            <div class="container">
                <div class="admin-nav">
                    <h1>âœŸ ë”í•˜ëŠ” êµíšŒ ê´€ë¦¬ì</h1>
                    <div class="admin-user-info">
                        <span>ğŸ‘¤ {{ user.username }}</span>
                        <a href="/logout" class="btn-logout">ë¡œê·¸ì•„ì›ƒ</a>
                        <a href="/" class="btn-home">í™ˆí˜ì´ì§€</a>
                    </div>
                </div>
            </div>
        </header>

        <div class="admin-container">
            <div class="container">
                <!-- Church Info Section -->
                <section class="admin-section">
                    <h2 class="section-title">êµíšŒ ì†Œê°œ ê´€ë¦¬</h2>
                    <div class="admin-card">
                        <form method="POST" action="/admin/church-info/update">
                            <div class="form-group">
                                <label for="church-intro">êµíšŒ ì†Œê°œ ë‚´ìš©</label>
                                <textarea id="church-intro" name="content" rows="5" required>{{ church_intro }}</textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">ì €ì¥</button>
                        </form>
                    </div>
                </section>

                <!-- Vision Management Section -->
                <section class="admin-section">
                    <h2 class="section-title">êµíšŒë¹„ì „ ê´€ë¦¬</h2>

                    <!-- Create Vision Form -->
                    <div class="admin-card">
                        <h3>ìƒˆ ë¹„ì „ ì˜ìƒ ë“±ë¡</h3>
                        <form method="POST" action="/admin/vision/create">
                            <div class="form-group">
                                <label for="vision-title">ì˜ìƒ ì œëª©</label>
                                <input type="text" id="vision-title" name="title" required>
                            </div>
                            <div class="form-group">
                                <label for="youtube-url">YouTube ë§í¬</label>
                                <input type="url" id="youtube-url" name="youtube_url" placeholder="https://www.youtube.com/watch?v=..." required>
                                <small class="form-hint">YouTube ì˜ìƒ URLì„ ì…ë ¥í•˜ì„¸ìš”. ì¸ë„¤ì¼ì´ ìë™ìœ¼ë¡œ ì¶”ì¶œë©ë‹ˆë‹¤.</small>
                            </div>
                            <button type="submit" class="btn btn-primary">ë¹„ì „ ë“±ë¡</button>
                        </form>
                    </div>

                    <!-- Vision List -->
                    <div class="admin-card">
                        <h3>ë“±ë¡ëœ ë¹„ì „ ëª©ë¡</h3>
                        <div class="vision-list-admin">
                            {% if visions %}
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>ë²ˆí˜¸</th>
                                        <th>ì œëª©</th>
                                        <th>ì‘ì„±ì</th>
                                        <th>ì‘ì„±ì¼</th>
                                        <th>YouTube ID</th>
                                        <th>ê´€ë¦¬</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for vision in visions %}
                                    <tr>
                                        <td>{{ vision.id }}</td>
                                        <td>{{ vision.title }}</td>
                                        <td>{{ vision.author }}</td>
                                        <td>{{ vision.date }}</td>
                                        <td><code>{{ vision.youtube_id }}</code></td>
                                        <td>
                                            <form method="POST" action="/admin/vision/delete/{{ vision.id }}" style="display: inline;">
                                                <button type="submit" class="btn-delete" onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì‚­ì œ</button>
                                            </form>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                            {% else %}
                            <p class="empty-message">ë“±ë¡ëœ ë¹„ì „ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                            {% endif %}
                        </div>
                    </div>
                </section>

                <!-- Sermon Management Section -->
                <section class="admin-section">
                    <h2 class="section-title">ì„¤êµ ê´€ë¦¬</h2>

                    <!-- Create Sermon Form -->
                    <div class="admin-card">
                        <h3>ìƒˆ ì„¤êµ ë“±ë¡</h3>
                        <form method="POST" action="/admin/sermon/create">
                            <div class="form-group">
                                <label for="sermon-title">ì„¤êµ ì œëª©</label>
                                <input type="text" id="sermon-title" name="title" required>
                            </div>
                            <div class="form-group">
                                <label for="pastor">ì„¤êµì</label>
                                <input type="text" id="pastor" name="pastor" value="ê¹€í•œê¸° ëª©ì‚¬" required>
                            </div>
                            <div class="form-group">
                                <label for="sermon-youtube-url">YouTube ë§í¬ (ì„ íƒ)</label>
                                <input type="url" id="sermon-youtube-url" name="youtube_url" placeholder="https://www.youtube.com/watch?v=...">
                                <small class="form-hint">YouTube ì˜ìƒ URLì„ ì…ë ¥í•˜ë©´ ì¸ë„¤ì¼ì´ ìë™ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤. (ì„ íƒì‚¬í•­)</small>
                            </div>
                            <div class="form-group">
                                <label for="sermon-description">ì„¤êµ ìš”ì•½</label>
                                <textarea id="sermon-description" name="description" rows="4" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">ì„¤êµ ë“±ë¡</button>
                        </form>
                    </div>

                    <!-- Sermon List -->
                    <div class="admin-card">
                        <h3>ë“±ë¡ëœ ì„¤êµ ëª©ë¡</h3>
                        <div class="sermon-list-admin">
                            {% if sermons %}
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>ë²ˆí˜¸</th>
                                        <th>ì œëª©</th>
                                        <th>ì„¤êµì</th>
                                        <th>ì„¤êµì¼</th>
                                        <th>YouTube ID</th>
                                        <th>ê´€ë¦¬</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for sermon in sermons %}
                                    <tr>
                                        <td>{{ sermon.id }}</td>
                                        <td>{{ sermon.title }}</td>
                                        <td>{{ sermon.pastor }}</td>
                                        <td>{{ sermon.date }}</td>
                                        <td>
                                            {% if sermon.youtube_id %}
                                            <code>{{ sermon.youtube_id }}</code>
                                            {% else %}
                                            <span style="color: #999;">-</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <form method="POST" action="/admin/sermon/delete/{{ sermon.id }}" style="display: inline;">
                                                <button type="submit" class="btn-delete" onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì‚­ì œ</button>
                                            </form>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                            {% else %}
                            <p class="empty-message">ë“±ë¡ëœ ì„¤êµê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                            {% endif %}
                        </div>
                    </div>
                </section>

                <!-- YouTube Shorts Management Section -->
                <section class="admin-section">
                    <h2 class="section-title">ë”í•˜ëŠ”êµíšŒ ìˆì¸  ê´€ë¦¬</h2>

                    <!-- Create Shorts Form -->
                    <div class="admin-card">
                        <h3>ìƒˆ ìˆì¸  ë“±ë¡</h3>
                        <form method="POST" action="/admin/shorts/create">
                            <div class="form-group">
                                <label for="shorts-title">ìˆì¸  ì œëª©</label>
                                <input type="text" id="shorts-title" name="title" required>
                            </div>
                            <div class="form-group">
                                <label for="shorts-youtube-url">YouTube Shorts ë§í¬</label>
                                <input type="url" id="shorts-youtube-url" name="youtube_url" placeholder="https://www.youtube.com/shorts/..." required>
                                <small class="form-hint">YouTube Shorts URLì„ ì…ë ¥í•˜ì„¸ìš”. ì¸ë„¤ì¼ì´ ìë™ìœ¼ë¡œ ì¶”ì¶œë©ë‹ˆë‹¤.</small>
                            </div>
                            <button type="submit" class="btn btn-primary">ìˆì¸  ë“±ë¡</button>
                        </form>
                    </div>

                    <!-- Shorts List -->
                    <div class="admin-card">
                        <h3>ìˆì¸  ëª©ë¡</h3>
                        {% if shorts %}
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>ë²ˆí˜¸</th>
                                    <th>ì œëª©</th>
                                    <th>ë“±ë¡ì¼</th>
                                    <th>YouTube ID</th>
                                    <th>ê´€ë¦¬</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for short in shorts %}
                                <tr>
                                    <td>{{ short.id }}</td>
                                    <td>{{ short.title }}</td>
                                    <td>{{ short.date }}</td>
                                    <td>
                                        {% if short.youtube_id %}
                                        <code>{{ short.youtube_id }}</code>
                                        {% else %}
                                        <span style="color: #999;">-</span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        <form method="POST" action="/admin/shorts/delete/{{ short.id }}" style="display: inline;">
                                            <button type="submit" class="btn-delete" onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì‚­ì œ</button>
                                        </form>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        {% else %}
                        <p class="empty-message">ë“±ë¡ëœ ìˆì¸ ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                        {% endif %}
                    </div>
                </section>

                <!-- News Management Section -->
                <section class="admin-section">
                    <h2 class="section-title">êµíšŒì†Œì‹ ê´€ë¦¬</h2>

                    <!-- Create News Form -->
                    <div class="admin-card">
                        <h3>ìƒˆ ì†Œì‹ ì‘ì„±</h3>
                        <form method="POST" action="/admin/news/create" enctype="multipart/form-data">
                            <div class="form-group">
                                <label for="title">ì œëª©</label>
                                <input type="text" id="title" name="title" required>
                            </div>
                            <div class="form-group">
                                <label for="content">ë‚´ìš©</label>
                                <textarea id="content" name="content" rows="6" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="image">ì´ë¯¸ì§€ ì²¨ë¶€ (ì„ íƒ)</label>
                                <input type="file" id="image" name="image" accept="image/*">
                                <small class="form-hint">JPG, PNG ë“±ì˜ ì´ë¯¸ì§€ íŒŒì¼ì„ ì²¨ë¶€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</small>
                            </div>
                            <button type="submit" class="btn btn-primary">ì†Œì‹ ë“±ë¡</button>
                        </form>
                    </div>

                    <!-- News List -->
                    <div class="admin-card">
                        <h3>ë“±ë¡ëœ ì†Œì‹ ëª©ë¡</h3>
                        <div class="news-list-admin">
                            {% if news_list %}
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>ë²ˆí˜¸</th>
                                        <th>ì œëª©</th>
                                        <th>ì‘ì„±ì</th>
                                        <th>ì‘ì„±ì¼</th>
                                        <th>ì¡°íšŒìˆ˜</th>
                                        <th>ì´ë¯¸ì§€</th>
                                        <th>ê´€ë¦¬</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for news in news_list %}
                                    <tr>
                                        <td>{{ news.id }}</td>
                                        <td>{{ news.title }}</td>
                                        <td>{{ news.author }}</td>
                                        <td>{{ news.date }}</td>
                                        <td>{{ news.views }}</td>
                                        <td>
                                            {% if news.image_path %}
                                            <span class="badge badge-success">ìˆìŒ</span>
                                            {% else %}
                                            <span class="badge badge-secondary">ì—†ìŒ</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <form method="POST" action="/admin/news/delete/{{ news.id }}" style="display: inline;">
                                                <button type="submit" class="btn-delete" onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì‚­ì œ</button>
                                            </form>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                            {% else %}
                            <p class="empty-message">ë“±ë¡ëœ ì†Œì‹ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                            {% endif %}
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</body>
</html>
